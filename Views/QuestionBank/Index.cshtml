@*@model IEnumerable<ISpanSTA.ViewModel.CExamViewModel>*@
@model X.PagedList.IPagedList<ISpanSTA.ViewModel.CExamViewModel>
@using X.PagedList.Mvc.Core;

@{
    ViewData["Title"] = "Index";
}

@section Header{

    <!-- Main Navigation -->
    <nav class="main_nav_container,align-items-center">
        <div class="main_nav">
            <ul id="main_nav_list" class="main_nav_list">
                <li class="main_nav_item">
                    <a href="Shome.html">主頁面</a>
                </li>
                <li class="main_nav_item">
                    <a asp-controller="AHome" asp-action="ArrangeCourse">排課系統</a>
                </li>
                <li class="main_nav_item">
                    <a asp-controller="AHome" asp-action="Leave">出缺勤系統</a>
                </li>
                <li class="main_nav_item">
                    <a href="Shomework.html">作業平台</a>
                </li>
                <li class="main_nav_item">
                    <a href="Stest.html">考試平台</a>
                </li>
                <li class="main_nav_item">
                    <a href="Svideo.html">影片平台</a>
                </li>
                <li class="main_nav_item">
                    <a href="Squestionaire.html">問卷調查</a>
                </li>
                <li class="main_nav_item">
                    <a href="Slearning.html">學習歷程後台</a>
                </li>
                <li class="main_nav_item">
                    <a href="Sforum.html">討論區後台</a>
                </li>
                <li class="main_nav_item">
                    <a href="Sworking.html">就業追蹤</a>
                </li>
            </ul>
        </div>
    </nav>
}

<head>
    <link rel="stylesheet" type="text/css" href="~/styles/bootstrap4/bootstrap.min.css">
    <link href="~/Scripts/plugins/fontawesome-free-5.0.1/css/fontawesome-all.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="~/styles/exam_styles.css">
    <link rel="stylesheet" type="text/css" href="~/styles/evaluation_responsive.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/calendar-15/fonts/icomoon/style.css">
    <link rel="stylesheet" href="~/calendar-15/css/rome.css">
    <link rel="stylesheet" href="~/calendar-15/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/calendar-15/css/style.css">
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


</head>


<p>
    <a asp-action="Create">Create New</a>
</p>

<body>
    <div class="eva-container">
        <div class="eva-menu">
            <div class="eva-menu-box">
                <div class="eva-menu-grpbox">
                    <div class="eva-menu-grp">
                        <div class="eva-menu-grptxt">
                            <a href="~/QuestionBank/Index">題庫管理</a>
                        </div>
                    </div>
                </div>

                <!--<div class="eva-menu-group">
                <span class="eva-menu-txt">問卷群組</span>
                <div class="@*eva-menu-addgrp*@">-->
                @*<svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" viewBox="0 0 384 512" style="font-size: 1.3em;">
                        <path d="M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>*@
                <!--</div>
                </div>-->
                <div class="eva-menu-grpbox">
                    <div class="eva-menu-grp">
                        <div class="eva-menu-grptxt">
                            <a href="~/TExamPaper/Index">試卷管理</a>
                        </div>
                    </div>
                </div>
                <div class="eva-menu-grpbox">
                    <div class="eva-menu-grp">
                        <div class="eva-menu-grptxt">
                            <a href="~/TSjCategory2/Index">測驗結果分析</a>
                        </div>
                    </div>
                </div>
                @*<div class="eva-menu-grpAdd">
                        點+後新增一個div在這裡, class=eva-menu-grp
                    </div>*@
            </div>
        </div>
        <div id="eva-content" class="eva-content">
            <div class="eva-content-title">
                <div class="eva-content-title-box">
                    <h4 class="eva-content-title-t">題目一覽表</h4>
                </div>
            </div>
            <div class="eva-content-statusCon">
                <div class="eva-content-status-filterAll">
                    <div class="eva-content-status-filter">
                        <div class="MuiInputBase-root">
                            <div class="selectDiv">
                                <select class="form-select" style="width: 128px; height: 32px; ">
                                    <option value="" style="display: none">全部課程</option>
                                    <option>C#</option>
                                    <option>TSQL</option>
                                    <option>JAVA</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="eva-content-status-filter">
                        <div class="MuiInputBase-root">
                            <div class="selectDiv">
                                <select class="form-select" style="width: 128px; height: 32px; ">
                                    <option value="" style="display: none">全部類別</option>
                                    <option>迴圈</option>
                                    <option>變數</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="eva-content-status-filter">
                        <div class="MuiInputBase-root">
                            <div class="selectDiv">
                                <select class="form-select" style="width: 128px; height: 32px; ">
                                    <option value="" style="display: none">全部題型</option>
                                    <option>單選題</option>
                                    <option>多選題</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="AddNewSurvey-big">
                    <button class="AddNewSurvey" tabindex="0" type="button">
                        <span class="AddNewSurvey-label">
                            <div class="AddNewSurvey-con">
                                <div class="AddNewSurvey-icon">
                                    <svg width="1em" height="1em" fill="#FFA500" aria-hidden="true" focusable="false" viewBox="0 0 512 512" style="font-size: 1em;"><path d="M384 250v12c0 6.6-5.4 12-12 12h-98v98c0 6.6-5.4 12-12 12h-12c-6.6 0-12-5.4-12-12v-98h-98c-6.6 0-12-5.4-12-12v-12c0-6.6 5.4-12 12-12h98v-98c0-6.6 5.4-12 12-12h12c6.6 0 12 5.4 12 12v98h98c6.6 0 12 5.4 12 12zm120 6c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-32 0c0-119.9-97.3-216-216-216-119.9 0-216 97.3-216 216 0 119.9 97.3 216 216 216 119.9 0 216-97.3 216-216z"></path></svg>
                                </div><a href="~/QuestionBank/Create" style="color: #FFA500">建立新題目</a>
                            </div>
                        </span>
                    </button>
                </div>
            </div>
            <div class="HeaderList">
                <div class="showList">
                    <div class="showListAll">
                        <span class="showListAll-t1">每頁顯示</span>
                        <div class="listNumCon">
                            <select class="form-select">
                                <option>10</option>
                                <option>20</option>
                            </select>
                        </div>
                        <span class="showListAll-t2">筆資料</span>
                    </div>
                </div>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>
                                序
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.FSujectId)
                                </th>*@
                            @*<th>
                                    @Html.DisplayNameFor(model => model.FCourseId)
                                </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FCourseName)
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.FCategoryId)
                                </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FCategoryName)
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.FTypeId)
                                </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FTypeName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FQuestion)
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.FOption1)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.FOption2)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.FOption3)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.FOption4)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.FAns)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.FAnsAnalyze)
                                </th>*@
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int count;
                            if (@Model.PageNumber == 1)
                            {
                                count = 0;
                            }
                            else
                            {
                                count = @Model.PageSize * (@Model.PageNumber - 1);
                            }
                            foreach (var item in Model)
                            {
                                count++;
                                <tr>
                                    <td>
                                        @count
                                    </td>
                                    @*<td>
                        @Html.DisplayFor(modelItem => item.FSujectId)
                    </td>*@
                                    @*<td>
                        @Html.DisplayFor(modelItem => item.FCourseId)
                    </td>*@
                                    <td>
                                        @Html.DisplayFor(modelItem => item.FCourseName)
                                    </td>
                                    @*<td>
                        @Html.DisplayFor(modelItem => item.FCategoryId)
                    </td>*@
                                    <td>
                                        @Html.DisplayFor(modelItem => item.FCategoryName)
                                    </td>
                                    @*<td>
                        @Html.DisplayFor(modelItem => item.FTypeId)
                    </td>*@
                                    <td>
                                        @Html.DisplayFor(modelItem => item.FTypeName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.FQuestion)
                                    </td>
                                    @*<td>
                        @Html.DisplayFor(modelItem => item.FOption1)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FOption2)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FOption3)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FOption4)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FAns)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FAnsAnalyze)
                    </td>*@
                                <td>
                                    <button type="button" class="btn btn-outline-success"><i class="fas fa-eye">@Html.ActionLink("查看", "Details", new { id = item.FSujectId })</i></button>
                                    <button type="button" class="btn btn-outline-warning"><i class="fas fa-edit">@Html.ActionLink("編輯", "Edit", new { id = item.FSujectId, coId = item.FCourseId, caId = item.FCategoryId })</i></button>                                    
                                    <button type="button" class="btn btn-outline-danger"><i class="fas fa-trash-alt"><a href=@Url.Action("Delete",new { id = item.FSujectId }) onclick="return alertDelete(event,@item.FSujectId); ">刪除</a></i></button>
                                </td>
                                </tr>
                            }
                                        }
                    </tbody>
                </table>
                <div class="ListFooter">
                    <div data-qa="pageTotal">
                        顯示 @(@count- @Model.Count()+1) 至 @count 筆，共 @Model.TotalItemCount.ToString() 筆資料
                    </div>
                    <css-1smfbm9>
                        <div class="MuiBox-root pageBox">
                            <br />
                            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount &emsp;

                            @Html.PagedListPager(Model, page => Url.Action("Index",
                                new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
                            @*<button class="MuiButtonBase-root MuiIconButton-root jss66 jss72 Mui-disabled MuiIconButton-sizeSmall Mui-disabled" tabindex="-1" type="button" disabled="" aria-disabled="true"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit" focusable="false" viewBox="0 0 256 512" aria-hidden="true"><path d="M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"></path></svg></span></button>
        <div class="MuiBox-root jss73" data-page="1" data-total-pages="1">
            <div class="MuiFormControl-root MuiTextField-root pageNum">
                <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-formControl">
                    <input aria-invalid="false" type="text" class="MuiInputBase-input MuiOutlinedInput-input jss64" value="1">
                    <fieldset aria-hidden="true" class="jss22 MuiOutlinedInput-notchedOutline" style="padding-left: 8px;"><legend class="jss23" style="width: 0.01px;"><span>​</span></legend></fieldset>
                </div>
            </div>
            <div class="MuiBox-root jss74">
                <p class="MuiTypography-root MuiTypography-body1">／</p>
            </div>
            <p class="MuiTypography-root MuiTypography-body1">1</p>
        </div>
        <button class="MuiButtonBase-root MuiIconButton-root jss66 jss75 Mui-disabled MuiIconButton-sizeSmall Mui-disabled" tabindex="-1" type="button" disabled="" aria-disabled="true"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit" focusable="false" viewBox="0 0 256 512" aria-hidden="true"><path d="M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z"></path></svg></span></button>*@
                        </div>
                    </css-1smfbm9>
                </div>
            </div>
        </div>
    </div>
</body>

@section Scripts {
    <script>
        function alertDelete(event,id) {
            /*alert(id);*/
            event.preventDefault();

            Swal.fire({
                title: '確定要刪除嗎?',
                /*text: "You won't be able to revert this!",*/
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: '確定',
                cancelButtonText:'取消'
                
            }).then(async(result) => {
                 if (result.isConfirmed) {

                    await fetch("@Url.Content("~/QuestionBank/Delete")" + `?id=${id}`);
                        
                    await Swal.fire(
                        '刪除成功!',
                        '該筆資料已刪除',
                        'success'
                     )
                     location.reload();                     
                }
                
            })
            return false;
        };

    </script>
}